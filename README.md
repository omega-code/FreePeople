# Система управления мероприятиями ЛВП («Люди вне професии»)

## Основные понятия

ЛВП («Люди вне профессии»), Организация — заказчик и эксплуатант системы, занимается организацией, продвижением и проведением выступлений. 

Выступление — событие, привязанное ко времени, площадке и персоне. Кроме перечисленных связей также имеет: название, комментарий к названию, краткий анонс, полный анонс. Также к нему может быть привязан набор фотографий и текст для финального отчета. 

Автор — человек, который вел или будет вести одно или более выступлений. В системе имеет имя, фотографию нужного формата, комментарий для внутреннего пользования, описание для поста, город, контакты. Контакты состоят из следующих полей: email (обязательное сразу поле), профиль  FB, номер телефона. Также имеет возможность авторизации, т.е. имеет связанного с ним пользователя в системе. 

Площадка — место, где проводятся выступления. Характеризуется названием, точным адресом, доп. описанием как добраться, описанием для поста, возможно — ссылкой на карту, ФИО и телефоном контактного лица. Адрес привязан к городу.

Город — часть адреса, но не свободная, а элемент управляемого администратором списка, имеет название, статус (включен или выключен) {и число голосов, поданное за этот город слушателями — в этой версии требований в сценариях не описано}. 

Слушатель — лицо, бывшее на выступлении или выразившее желание быть. Храним о нем email и имя  (что уже требует от нас быть провайдером персональных данных, либо делать вид, что храним не мы, а, например, таймпад)  и историю посещений выступлений, со статусом — пришёл/не пришёл. 

Администратор — сотрудник организации, занимающийся планированием выступлений и приглашением авторов. Имеет возможность авторизации, т.е. связанного с ним пользователя в системе. Имеет привязку к городу. 

Пользователь — понятие системы, нужное для регулирования доступа к ней реальных людей. Имеет роль: Администратор или Персона, адрес почты и код доступа. 

## Сценарии использования

Основная сущность системы — выступление. Реализация его жизненного цикла складывается основными сценариями использования системы. Все операции системы производятся через веб-интерфейс, в контексте которого находится настройка “текущий город”, который берется из текущего пользователя — автора или администратора. 

### Планирование выступления
Администратор решает, что некий человек может стать автором (если еще не является) и провести выступление. Он согласовывает намерение с человеком, и отсылает ему ссылку на заполнение выступления. 

### Описание выступления
Автор получает прямую ссылку на форму регистрации (состоящую из одной почты), заполнив которую, получает ссылку на свой личный кабинет, а конкретно — на создание выступление. 

Для этого он заполняет дату и время, название выступления и комментарий, и выбирает из списка существующих авторов нужного человека. Если его еще нет в системе, то система предлагает зарегистрировать автора, указав город (по умолчанию — город администратора, но можно изменить), имя, email и внутренний комментарий. При этом автоматически создается пользователь для этого автора. Если же автор есть, он просто выбирается из списка. Список отсортирован так: сначала по алфавиту авторы текущего города, потом остальные, тоже по алфавиту. 
После выбора есть ссылка на редактирование данных автора, открывается в новом окне. 

Ему нужно отредактировать название и комментарий, а также заполнить — краткий и полный анонсы. 

Также ему нужно отредактировать свои данные: имя, контакты, прикрепить фотографию. Если ранее для другого выступления автор уже прикреплял фотографию, она показывается как выбранная по умолчанию, но он может загрузить другую. Выбранная фотография сохраняется как фотография данного автора. 

После завершения правок, автор нажимает “Отправить на утверждение” и выступление попадает на утверждение администратору. Статус меняется на “на утверждении”. 

### Утверждение выступления
Администратор получает ссылку на страницу мероприятия под своим логином. Также, он видит его в списке мероприятий в статусе “на утверждении”. Это значит, что автор внес свои правки, нужно проверить и “запечатать”.

Также выбирает, площадку из списка. Если ее еще нет в системе, то система предлагает зарегистрировать площадку, указав имя и адрес (город задается автоматически на основе города администратора). Если же площадка есть, она просто выбирается из списка. Список отсортирован по алфавиту, но деактивированные площадки при выборе площадок показываются серым и после основного списка.  
После выбора есть ссылка на редактирование данных площадки, открывается в новом окне.

Администратор видит и может редактировать все вышеперечисленные поля выступления. После нажатия “Утвердить выступление” внесенные изменения сохраняются, и также автор теряет доступ к изменению полей. Статус меняется на “утверждено”. 

При этом формируется (и показывается в виде превью) постер, который строится так: на белый прямоугольник фона помещаются: в левую зону — фото автора, на которое накладывается логотип ЛВП в верхней части и иконка “поддержите нас” и адрес сайта организации в — в нижней; в правую зону: город, дата и время, название мероприятия, комментарий к названию, краткий анонс. Внизу правой зоны — название площадки и в скобках комментарий, как добраться. 

Администратор должен сам убедиться, что все надписи красиво помещаются в отведенные места, и что логотип не закрывает лицо автора на фото. Если необходимо, администратор своими силами редактирует фото (меняя масштаб или сдвигая изображение) так, чтобы логотип не попадал на лицо, и изменяет формулировки текста, чтобы надписи вписывались в нужные размеры. 

### Публикация выступления

Когда администратор решает, что пришла пора поделиться мероприятием, он заходит в него (статус должен быть “утверждено”) и нажимает “Опубликовать”. При этом генерируется событие в Timepad, и мероприятия в FB, VK, в качестве прикрепленного изображения используется постер. Статус становится “опубликовано”. Также генерируется дополнительная  афиша для партнерской сети.
Автоматическая активность по выступлению
В указанные дни относительно даты выступления — например, за 3, за 1, — система автоматически публикует в мероприятиях посты “о площадке”, “об авторе”. Информация берется из описания этих сущностей, если описания указаны, иначе посты не делаются. 

### Проведение выступления

Кнопка “обновить участников” загружает свежие данные участников из Timepad. Напротив каждого участника в списке есть действия “пришел” и “не пришел”, которые сменяются на “отменить”, на случай ошибочной отметки. 

### Закрытие выступления

Администратор после даты выступления может прикрепить набор фотографий к выступлению, ввести текст отчета и нажать “Опубликовать отчет”. При этом публикуется пост с загруженными фото. Статус меняется на “отчет опубликован”. Это финальный статус мероприятия. 

### Просмотр выступлений
Администратор видит списком все выступления своего города. Отсортированы по дате выступления. Ближайшие вверху. Прошедшие — скрыты по умолчанию, можно развернуть. 

### Редактирование площадки
Все поля, причём город не редактируется. Есть действие “деактивировать” (которое сменяется на “активировать”). Деактивированные площадки при выборе площадок показываются серым и после основного списка. 
### Редактирование автора
Все поля. 
### Выгрузка данных выступления
Специальная ссылка для конкретного выступления, по которой отдается csv-файл с именами, почтой и статусом посещения.
### Выгрузка данных аудитории города
Ссылка для текущего города, по которой отдается csv-файл с именами, почтой и числом посещенных и непосещенных выступлений.

-----
* управление SMM сюда не включаю, т.к. всё же убежден, что можно найти готовую и удобную (а не как вы пользуетесь) программу для этого. 

